---
title: "Claude Code"
description: "基于 Anthropic Claude 的代码编辑器集成工具配置指南"
---

## Model Router 集成方法

### 参数配置

配置 Claude Code 连接到 Model Router 需要以下信息：

- **ANTHROPIC_AUTH_TOKEN**：从 Model Router 控制台获取的 API Key（以 `sk-` 开头）
- **ANTHROPIC_BASE_URL**：Model Router 服务地址（如 `https://api.onehub.cn`）

### 可视化指南

#### 1. 安装 Claude Code

通过 npm 全局安装 Claude Code：

```bash
npm install -g @anthropic-ai/claude-code
```

验证安装：

```bash
claude --version
```

#### 2. 获取 API Key

在 Model Router 控制台的令牌管理页面，点击"添加令牌"获取 API Key。

<Info>
名称可随意设置，额度建议设为无限额度，其他保持默认设置即可。
</Info>

<Frame>
  <img
    className="rounded-xl"
    src="/images/ai-applications/claude-code/get-api-key.png"
    alt="在 Model Router 控制台获取 API Key"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

#### 3. 配置环境变量

在项目目录下设置环境变量并启动：

```bash
cd your-project-folder
export ANTHROPIC_AUTH_TOKEN=sk-...
export ANTHROPIC_BASE_URL=https://api.onehub.cn
claude
```

#### 4. 初始化配置

运行后按提示完成初始化：

1. 选择你喜欢的主题 + Enter
2. 确认安全须知 + Enter
3. 使用默认 Terminal 配置 + Enter
4. 信任工作目录 + Enter

#### 5. 开始使用

配置完成后，即可在终端里和 AI 编程搭档一起写代码。

<Frame>
  <img
    className="rounded-xl"
    src="/images/ai-applications/claude-code/usage.png"
    alt="Claude Code 使用界面"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

## 持久化配置（推荐）

为避免每次重复输入环境变量，可将配置写入 shell 配置文件：

### Bash 配置

```bash
echo -e '\n export ANTHROPIC_AUTH_TOKEN=sk-...' >> ~/.bash_profile
echo -e '\n export ANTHROPIC_BASE_URL=https://api.onehub.cn' >> ~/.bash_profile
echo -e '\n export ANTHROPIC_AUTH_TOKEN=sk-...' >> ~/.bashrc
echo -e '\n export ANTHROPIC_BASE_URL=https://api.onehub.cn' >> ~/.bashrc
```

### Zsh 配置

```bash
echo -e '\n export ANTHROPIC_AUTH_TOKEN=sk-...' >> ~/.zshrc
echo -e '\n export ANTHROPIC_BASE_URL=https://api.onehub.cn' >> ~/.zshrc
```

配置完成后，重启终端即可直接使用：

```bash
cd your-project-folder
claude
```

## 使用要点

1) **获取 API Key**：确保在 Model Router 控制台已生成有效的 API Key（以 `sk-` 开头）。  
2) **配置 API 地址**：使用正确的 Model Router 服务地址，例如 `https://api.onehub.cn`。  
3) **环境变量**：建议将环境变量写入 shell 配置文件，避免每次手动设置。  
4) **项目目录**：在项目目录下运行 `claude` 命令，确保工作目录正确。

## 常见问题

- **安装失败**：确保已安装 Node.js 和 npm，使用 `npm install -g` 需要管理员权限。
- **连接失败**：检查 API 地址和 API Key 是否正确，确保网络连接正常。
- **环境变量未生效**：确认已正确写入配置文件，并重启终端或执行 `source ~/.bashrc`（或 `source ~/.zshrc`）。

## 限制与说明

- Claude Code 需要 Node.js 环境支持。
- API Key 需要以 `sk-` 开头，确保从 Model Router 控制台正确获取。
- 模型可用性取决于你的 Model Router 令牌分组配置。

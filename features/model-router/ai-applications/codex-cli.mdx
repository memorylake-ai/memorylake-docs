---
title: "Codex CLI"
description: "Command-line interface AI code assistant tool configuration guide"
---

## Model Router Integration Method

### Parameter Configuration

The following information is required to configure Codex CLI to connect to Model Router:

- **OPENAI_API_KEY**: API Key obtained from the Model Router [console](https://app.memorylake.ai/panel/token) (starts with `sk-`)
- **base_url**: Model Router service address (e.g., `https://app.memorylake.ai/v1`)
- **model**: Model name to use (e.g., `gpt-5-codex`)

### Visual Guide

#### 1. Install Node.js

Ensure Node.js environment is installed. Codex CLI requires Node.js support.

#### 2. Install Codex CLI

Install Codex CLI globally via npm:

```bash
npm i -g @openai/codex
```

Verify installation:

```bash
codex --version
```

#### 3. Get API Key

Click "Add Token" on the [token management page](https://app.memorylake.ai/panel/token) in the Model Router console to get an API Key.

<Info>
The name can be set arbitrarily. It's recommended to set the quota to unlimited. Keep other settings as default.
</Info>

<Frame>
  <img
    className="rounded-xl"
    src="/images/ai-applications/get-api-key.png"
    alt="Get API Key from Model Router console"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

#### 4. Create Configuration Files

Create `~/.codex/config.toml` file and add the following configuration:

```toml config.toml
model = "gpt-5"
model_provider = "memorylake"
preferred_auth_method = "apikey"

[model_providers.memorylake]
name = "MemoryLake"
base_url = "https://app.memorylake.ai/v1"
wire_api = "responses"
```

Create `~/.codex/auth.json` file and add the following configuration:

```json auth.json
{
  "OPENAI_API_KEY": "Replace here with your KEY"
}
```

<Warning>
The configuration file path `~/.codex` can also be specified using the `CODEX_HOME` environment variable.
</Warning>

#### 5. Start Using

Run in the project directory:

```bash
cd your-project-folder
codex
```

<Frame>
  <img
    className="rounded-xl"
    src="/images/ai-applications/codex-cli/usage.png"
    alt="Codex CLI usage interface"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

## Configuration File Description

### config.toml Configuration Items

- **model**: Specify the model name to use
- **model_provider**: Model provider identifier (use `memorylake` to represent Model Router)
- **preferred_auth_method**: Authentication method (use `apikey`)
- **base_url**: Model Router API address, must include `/v1` path

### auth.json Configuration Items

- **OPENAI_API_KEY**: API Key obtained from the Model Router [console](https://app.memorylake.ai/panel/token)

### Custom Configuration Path

To use a custom configuration path, set the `CODEX_HOME` environment variable:

```bash
export CODEX_HOME=/path/to/your/config
```

## Key Points

1) **Get API Key**: Ensure you have generated a valid API Key in the Model Router [console](https://app.memorylake.ai/panel/token) (starts with `sk-`).  
2) **Configuration File Path**: Default uses `~/.codex` directory, can be customized via `CODEX_HOME` environment variable.  
3) **API Address**: Ensure `base_url` includes `/v1` path, e.g., `https://app.memorylake.ai/v1`.  
4) **Model Name**: Choose an appropriate model name based on your Model Router configuration.

## Common Issues

- **Installation Failed**: Ensure Node.js and npm are installed; using `npm i -g` requires administrator privileges.
- **Configuration File Not Found**: Manually create `~/.codex` directory and configuration files.
- **Connection Failed**: Check if `base_url` and `OPENAI_API_KEY` are correct, and ensure network connection is normal.
- **Model Unavailable**: Confirm that the model is enabled and configured in your Model Router token group.

## Limitations and Notes

- Codex CLI requires Node.js environment support.
- API Key must start with `sk-`; ensure it's correctly obtained from the Model Router [console](https://app.memorylake.ai/panel/token).
- Model availability depends on your Model Router token group configuration.
- Configuration file path can be customized via `CODEX_HOME` environment variable.

---
title: "Codex CLI"
description: "命令行界面 AI 代码助手工具配置指南"
---

## Model Router 集成方法

### 参数配置

配置 Codex CLI 连接到 Model Router 需要以下信息：

- **OPENAI_API_KEY**：从 Model Router 控制台获取的 API Key（以 `sk-` 开头）
- **base_url**：Model Router 服务地址（如 `https://app.memorylake.ai/v1`）
- **model**：使用的模型名称（如 `gpt-5-codex`）

### 可视化指南

#### 1. 安装 Node.js

确保已安装 Node.js 环境。Codex CLI 需要 Node.js 支持。

#### 2. 安装 Codex CLI

通过 npm 全局安装 Codex CLI：

```bash
npm i -g @openai/codex
```

验证安装：

```bash
codex --version
```

#### 3. 获取 API Key

在 Model Router 控制台的令牌管理页面，点击"添加令牌"获取 API Key。

<Info>
名称可随意设置，额度建议设为无限额度，其他保持默认设置即可。
</Info>

<Frame>
  <img
    className="rounded-xl"
    src="/images/ai-applications/get-api-key.png"
    alt="在 Model Router 控制台获取 API Key"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

#### 4. 创建配置文件

创建 `~/.codex/config.toml` 文件，并添加如下配置：

```toml config.toml
model = "gpt-5"
model_provider = "memorylake"
preferred_auth_method = "apikey"

[model_providers.memorylake]
name = "MemoryLake"
base_url = "https://app.memorylake.ai/v1"
wire_api = "responses"
```

创建 `~/.codex/auth.json` 文件，并添加如下配置：

```json auth.json
{
  "OPENAI_API_KEY": "这里换成你申请的 KEY"
}
```

<Warning>
上述配置文件的路径 `~/.codex` 也可以用 `CODEX_HOME` 环境变量指定。
</Warning>

#### 5. 开始使用

在项目目录下运行：

```bash
cd your-project-folder
codex
```

<Frame>
  <img
    className="rounded-xl"
    src="/images/ai-applications/codex-cli/usage.png"
    alt="Codex CLI 使用界面"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

## 配置文件说明

### config.toml 配置项

- **model**：指定使用的模型名称
- **model_provider**：模型提供商标识（使用 `anyrouter` 表示 Model Router）
- **preferred_auth_method**：认证方式（使用 `apikey`）
- **base_url**：Model Router 的 API 地址，需要包含 `/v1` 路径

### auth.json 配置项

- **OPENAI_API_KEY**：从 Model Router 控制台获取的 API Key

### 自定义配置路径

如需使用自定义配置路径，可设置 `CODEX_HOME` 环境变量：

```bash
export CODEX_HOME=/path/to/your/config
```

## 使用要点

1) **获取 API Key**：确保在 Model Router 控制台已生成有效的 API Key（以 `sk-` 开头）。  
2) **配置文件路径**：默认使用 `~/.codex` 目录，可通过 `CODEX_HOME` 环境变量自定义。  
3) **API 地址**：确保 `base_url` 包含 `/v1` 路径，例如 `https://app.memorylake.ai/v1`。  
4) **模型名称**：根据你的 Model Router 配置选择合适的模型名称。

## 常见问题

- **安装失败**：确保已安装 Node.js 和 npm，使用 `npm i -g` 需要管理员权限。
- **配置文件不存在**：手动创建 `~/.codex` 目录和配置文件。
- **连接失败**：检查 `base_url` 和 `OPENAI_API_KEY` 是否正确，确保网络连接正常。
- **模型不可用**：确认该模型在你的 Model Router 令牌分组中已开通并配置。

## 限制与说明

- Codex CLI 需要 Node.js 环境支持。
- API Key 需要以 `sk-` 开头，确保从 Model Router 控制台正确获取。
- 模型可用性取决于你的 Model Router 令牌分组配置。
- 配置文件路径可通过 `CODEX_HOME` 环境变量自定义。

---
title: "配额与结算"
description: "预扣-结算双阶段、独立额度与价格元数据，保障可控用量与透明计费"
---

## 核心能力
- 预扣-结算双阶段：请求前预占额度，完成后按真实用量结算，减少超支或漏计。
- 独立额度：不同令牌或令牌分组的额度独立管理，互不影响。
- 价格元数据：模型目录返回价格与 owned_by 信息，便于前台展示与成本预估。

## 适用场景
- 在调用前希望确认额度是否足够，避免中途失败。
- 多团队、多应用或多令牌分组需要彼此独立的额度与模型可见范围。
- 前台或配置中心需要拉取价格元数据，展示来源与成本信息。

## 扣除流程
1) 请求前：平台按令牌/上下文检查可用额度，不足会直接拒绝请求。  
2) 请求完成：按真实用量结算，不会多扣；失败请求不会额外消耗额度。  
3) 查看价格：在[可用模型列表页面](https://app.memorylake.ai/panel/available_model)，查看模型价格信息。

<Frame>
  <img
    className="rounded-xl"
    src="/images/model-router/quota-flow.png"
    alt="配额检查与结算行为示意占位"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

## 如何查看配额与扣费明细
- 总额度与已用量：在控制台侧边栏的额度卡和团队配额页面，查看当前上下文的可用额度与已消耗额度（详见「团队协作 / 配额与用量」）。  
- 单次调用扣费：在[「日志」](https://app.memorylake.ai/panel/log)页面点击任意一条调用，打开详情弹窗，可看到本次调用的输入/输出价格、换算过程、实际扣费额度以及配额来源（个人 / 团队 / 混合）。  

<Frame>
  <img
    className="rounded-xl"
    src="/images/model-router/billing-list.png"
    alt="调用日志详情中的价格与扣费明细示意占位"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

<Frame>
  <img
    className="rounded-xl"
    src="/images/model-router/billing-detail.png"
    alt="调用日志详情中的价格与扣费明细示意占位"
    style={{ width: "100%", height: "auto" }}
  />
</Frame>

## 返回要点（模型目录）
- `id`：模型标识，用于后续请求的 `model` 字段。
- `owned_by`：模型来源或归属。
- 价格元数据：用于前台展示与成本预估，实际计费以结算结果为准。

## 使用提醒
- 可用额度与模型范围以令牌或令牌分组的实际配置为准；未开通的模型不可见也不可用。
- 价格与 owned_by 来自模型目录返回，计费仍以结算阶段结果为准。

---
title: "MCP Server Security"
description: "Security best practices for managing MCP server API keys"
---

## Security Principles

Protect your API keys to prevent unauthorized access to your project data.

## API Key Security

### Never Commit to Version Control

**Never** commit API keys to Git:

```bash
# .gitignore
.env
.env.local
.env.*.local
secrets.json
config/keys.json
```

<Warning>
If you accidentally commit a key, immediately:
1. Delete the API key in MemoryLake
2. Remove from Git history (use git-filter-branch or BFG)
3. Generate a new key
4. Update applications
</Warning>

### Secure Storage

Store keys securely:

**Good**:
- Environment variables (`.env` in `.gitignore`)
- Password managers (1Password, LastPass)
- Secrets management services (AWS Secrets Manager, Azure Key Vault)
- CI/CD secret stores (GitHub Secrets, GitLab CI/CD Variables)

**Bad**:
- Hardcoded in source code
- Committed to Git
- Shared via email or chat
- Stored in plaintext files tracked by Git
- Screenshots or documentation

### Environment Variables

```bash
# .env (add to .gitignore!)
MEMORYLAKE_API_KEY=mlk_secret_abc123...

# Use in code
const apiKey = process.env.MEMORYLAKE_API_KEY;
```

## Access Control

### Principle of Least Privilege

Create separate keys for different purposes:
- Development key (dev data)
- Staging key (staging project)
- Production key (production data)
- Per-user keys (accountability)

### Key Rotation

Rotate keys regularly:
- **Development**: Monthly or as needed
- **Staging**: Quarterly
- **Production**: Annually or after suspected compromise

### Revoke Unused Keys

Delete API keys that are:
- No longer needed
- Associated with departed team members
- Used for completed projects
- Potentially compromised

## Monitoring & Auditing

### Log API Usage

In your applications:
```javascript
async function callAPI(endpoint, options) {
  console.log(`API Request: ${endpoint} at ${new Date().toISOString()}`);
  
  try {
    const response = await fetch(endpoint, options);
    console.log(`API Response: ${response.status}`);
    return response;
  } catch (error) {
    console.error(`API Error: ${error.message}`);
    throw error;
  }
}
```

### Monitor for Anomalies

Watch for:
- Unexpected API calls
- High request volumes
- Calls from unexpected IP addresses
- 401 Unauthorized errors (key might be compromised)
- Unusual access patterns

### Set Up Alerts

Create alerts for:
- Multiple failed authentication attempts
- API usage spikes
- Access from new locations
- Error rate increases

## Incident Response

### If Key is Compromised

<Steps>
<Step title="Delete Key Immediately">
Revoke the compromised API key in MemoryLake.
</Step>

<Step title="Assess Impact">
- Check what data was accessible
- Review access logs if available
- Determine scope of exposure
</Step>

<Step title="Generate New Key">
Create replacement API key.
</Step>

<Step title="Update Applications">
Deploy new key to affected applications.
</Step>

<Step title="Investigate">
- How was key compromised?
- What needs to change to prevent recurrence?
- Document incident and response
</Step>

<Step title="Notify Stakeholders">
Inform affected parties if necessary.
</Step>
</Steps>

### If Key is Lost

If you lose the API secret:
1. No security risk (it's only shown once)
2. Delete the key to clean up
3. Create a new key
4. Update applications

## Best Practices

<AccordionGroup>

<Accordion title="Development">
- Use separate keys for dev/staging/prod
- Never use production keys in development
- Rotate development keys frequently
- Don't share keys between developers
</Accordion>

<Accordion title="Production">
- Minimize number of production keys
- Document where each key is used
- Set calendar reminders for rotation
- Have process for emergency revocation
- Monitor usage patterns
</Accordion>

<Accordion title="Team Access">
- Create individual keys per team member
- Revoke keys when team members leave
- Use descriptive names (include person's name)
- Document key ownership
</Accordion>

<Accordion title="CI/CD">
- Use CI/CD secret storage
- Rotate keys after build system changes
- Limit key access to necessary jobs only
- Audit CI/CD logs regularly
</Accordion>

</AccordionGroup>

## Security Checklist

Before deploying:
- [ ] API key stored in environment variable
- [ ] `.env` file in `.gitignore`
- [ ] No keys in source code
- [ ] Separate keys for each environment
- [ ] Logging configured
- [ ] Key rotation schedule set
- [ ] Team knows incident response process
- [ ] Keys documented (where used, by whom)

## Compliance

Depending on your industry:
- **HIPAA**: API keys accessing health data need audit trails
- **GDPR**: Document who has access to personal data
- **SOC 2**: Maintain access logs and rotation schedules
- **PCI DSS**: Secure key storage and transmission

Consult your compliance team for specific requirements.

## Next Steps

<CardGroup cols={2}>
<Card title="Creating API Keys" icon="key" href="/features/memorylake/mcp-servers/creating-api-keys">
Generate secure API keys
</Card>

<Card title="Configuration" icon="gear" href="/features/memorylake/mcp-servers/configuration">
Configure API key usage
</Card>

<Card title="Troubleshooting" icon="wrench" href="/features/memorylake/mcp-servers/troubleshooting">
Solve security-related issues
</Card>
</CardGroup>
